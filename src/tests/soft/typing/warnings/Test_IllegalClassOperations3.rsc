module tests::soft::typing::warnings::Test_IllegalClassOperations3


import lang::php::analysis::cfg::Label;
import soft::typing::php::elements::Identifier;
import soft::typing::php::constraints::ConstraintHelper;
import soft::typing::php::Utils::Analysis;
import tests::soft::typing::php::helper::Test_SetComparator;

import soft::typing::php::declarations::PublicDataTypes;

private loc localP=rootP+"Test_IllegalClassOperations3";

//Trying to resolve some errors discovered
//while running object-oriented php code
//for the thesis sample results.

test bool test_MethodInvocationOnNonObject()
{
	fileTest="MethodInvocationOnNonObject.php";
	exitEnvm=runAnalysis(localP,fileTest);

	expectInfo=
	<(
	  "MethodInvocationOnNonObject.php":(
	    lab(54):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):nullTypeRoot()),
	              "DataStream",
	              {}))}),
	      var("reader"):nullTypeRoot(),
	      var("success"):nullTypeRoot()
	    ),
	    lab(92):(
	      var("dataObj"):typeSet({
	          Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {})),
	          String()
	        }),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(93):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(67):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))}),
	      var("success"):nullTypeRoot()
	    ),
	    lab(79):(
	      var("dataObj"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(75):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(83):(
	      var("dataObj"):typeSet({String()}),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(51):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):nullTypeRoot(),
	      var("reader"):nullTypeRoot(),
	      var("success"):nullTypeRoot()
	    ),
	    lab(94):(
	      var("dataObj"):typeSet({
	          Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {})),
	          String()
	        }),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(62):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))}),
	      var("success"):nullTypeRoot()
	    ),
	    lab(90):(
	      var("dataObj"):typeSet({
	          Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {})),
	          String()
	        }),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(58):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):nullTypeRoot(),
	      var("success"):nullTypeRoot()
	    ),
	    lab(91):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):nullTypeRoot(),
	      var("reader"):nullTypeRoot(),
	      var("success"):nullTypeRoot()
	    ),
	    lab(27):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):nullTypeRoot(),
	      var("reader"):nullTypeRoot(),
	      var("success"):nullTypeRoot()
	    ),
	    lab(73):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(9):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):nullTypeRoot(),
	      var("reader"):nullTypeRoot(),
	      var("success"):nullTypeRoot()
	    )
	  ),
	  "DataRow.setMyContent":(
	    lab(95):(
	      var("this"):nullTypeRoot(),
	      var("str"):nullTypeRoot()
	    ),
	    lab(4):(
	      var("this"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("str"):typeSet({String()})
	    ),
	    lab(96):(
	      var("this"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("str"):typeSet({String()})
	    ),
	    lab(97):(
	      var("this"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):nullTypeRoot()),
	              "DataRow",
	              {}))}),
	      var("str"):typeSet({String()})
	    )
	  ),
	  "DataReader.setDataStream":(
	    lab(29):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))})
	    ),
	    lab(38):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))})
	    ),
	    lab(32):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))})
	    ),
	    lab(35):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))})
	    ),
	    lab(108):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))})
	    ),
	    lab(109):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))})
	    ),
	    lab(110):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))})
	    ),
	    lab(111):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))})
	    ),
	    lab(107):(
	      var("newDataStream"):nullTypeRoot(),
	      var("this"):nullTypeRoot()
	    )
	  ),
	  "DataRow.getMyContent":(
	    lab(98):(var("this"):nullTypeRoot()),
	    lab(99):(var("this"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))})),
	    lab(8):(var("this"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}))
	  ),
	  "DataStream.setMyResource":(
	    lab(20):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))})
	    ),
	    lab(16):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))})
	    ),
	    lab(24):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))})
	    ),
	    lab(100):(
	      var("val"):nullTypeRoot(),
	      var("this"):nullTypeRoot()
	    ),
	    lab(101):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))})
	    ),
	    lab(102):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):nullTypeRoot()),
	              "DataStream",
	              {}))})
	    ),
	    lab(103):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))})
	    ),
	    lab(12):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):nullTypeRoot()),
	              "DataStream",
	              {}))})
	    ),
	    lab(104):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):nullTypeRoot()),
	              "DataStream",
	              {}))})
	    )
	  ),
	  "DataReader.getRandomDataRow":(
	    lab(113):(
	      var("aData"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))})
	    ),
	    lab(45):(
	      var("aData"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))})
	    ),
	    lab(41):(
	      var("aData"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):nullTypeRoot()),
	              "DataRow",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))})
	    ),
	    lab(112):(var("aData"):nullTypeRoot()),
	    lab(48):(
	      var("aData"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):typeSet({Bool()})),
	              "DataReader",
	              {}))})
	    )
	  )
	),(
	  "MethodInvocationOnNonObject.php":[
	    objChangedState("Object instance: var(stream) changed state in a func. or method body @ lab(58)."),
		//Duplicate... low-priority error (actually not an error!)
	    callMethodFromNonObjectVar("Attempt to call method: getMyContent from non-object @ lab(88)."),
	    callMethodFromNonObjectVar("Attempt to call method: getMyContent from non-object @ lab(88)."),
	    usingVoidTypeForExpr("Computed typeSet for lab(88) has Void type."),
	    typeCoercionWarning("Possible Illegal Type Coercion @ lab(88). Got: Void(). Expected from: {String()}."),
	    varHasMultipleTypes("Var dataObj acquired more than one types at lab(79)."),
	    callMethodFromNonObjectVar("Attempt to call method: getMyContent from non-object @ lab(88).")
	  ],
	  "DataRow.setMyContent":[],
	  "DataReader.setDataStream":[],
	  "DataRow.getMyContent":[],
	  "DataStream.setMyResource":[],
	  "DataReader.getRandomDataRow":[
	    usingVoidTypeForExpr("Computed typeSet for lab(45) has Void type."),
	    objChangedState("Object instance: var(aData) changed state in a func. or method body @ lab(45).")
	  ]
	)>;		
	return assertEquals(<AppExitEnvms,AppWarnings>,expectInfo,"AppInfo","generate warnings");
}

test bool test_ReadUninitializedPropertyError()
{
	fileTest="ReadUninitializedPropertyError.php";
	exitEnvm=runAnalysis(localP,fileTest);
	
	//fixed an error where required constraints were
	//not being generated for the following case:
	/*
	 if($obj->uninitializedProperty){
		...
	 }
	*/
	//However, this caused an error for normal propertySet
	//expressions, i.e.
	//$obj->someProperty= <some value>
	
	//fixed error, and wrote small test: test_SettingAnInstanceProperty()
	expectInfo=

	<(
	  "A.funcA":(
	    lab(20):(
	      var("foo"):nullTypeRoot(),
	      var("this"):typeSet({Object(
	            objHd(2),
	            objInst(
	              2,
	              (var("var"):nullTypeRoot()),
	              "A",
	              {}))})
	    ),
	    lab(21):(
	      var("foo"):typeSet({Float()}),
	      var("this"):typeSet({Object(
	            objHd(2),
	            objInst(
	              2,
	              (var("var"):nullTypeRoot()),
	              "A",
	              {}))})
	    ),
	    lab(18):(
	      var("foo"):nullTypeRoot(),
	      var("this"):nullTypeRoot()
	    ),
	    lab(19):(
	      var("foo"):typeSet({Float()}),
	      var("this"):typeSet({Object(
	            objHd(2),
	            objInst(
	              2,
	              (var("var"):nullTypeRoot()),
	              "A",
	              {}))})
	    ),
	    lab(5):(
	      var("foo"):typeSet({Float()}),
	      var("this"):typeSet({Object(
	            objHd(2),
	            objInst(
	              2,
	              (var("var"):nullTypeRoot()),
	              "A",
	              {}))})
	    ),
	    lab(2):(
	      var("foo"):nullTypeRoot(),
	      var("this"):typeSet({Object(
	            objHd(2),
	            objInst(
	              2,
	              (var("var"):nullTypeRoot()),
	              "A",
	              {}))})
	    )
	  ),
	  "ReadUninitializedPropertyError.php":(
	    lab(16):(var("a"):nullTypeRoot()),
	    lab(17):(var("a"):typeSet({Object(
	            objHd(2),
	            objInst(
	              2,
	              (var("var"):nullTypeRoot()),
	              "A",
	              {}))})),
	    lab(14):(var("a"):typeSet({Object(
	            objHd(2),
	            objInst(
	              2,
	              (var("var"):nullTypeRoot()),
	              "A",
	              {}))})),
	    lab(8):(var("a"):nullTypeRoot()),
	    lab(11):(var("a"):typeSet({Object(
	            objHd(2),
	            objInst(
	              2,
	              (var("var"):nullTypeRoot()),
	              "A",
	              {}))}))
	  )
	),(
	  "A.funcA":[
	    readUninitializedClassProperty("Attempt to read un-initialized object property: var(var) @ lab(2)."),
	    usingVoidTypeForExpr("Computed typeSet for lab(2) has Void type.")
	  ],
	  "ReadUninitializedPropertyError.php":[usingVoidTypeForExpr("Computed typeSet for lab(14) has Void type.")]
	)>;	

	return assertEquals(<AppExitEnvms,AppWarnings>,expectInfo,"AppInfo","generate warnings");
}


test bool test_SettingAnInstanceProperty()
{
	fileTest="SettingAnInstanceProperty.php";
	exitEnvm=runAnalysis(localP,fileTest);
	
	//small test to verify that property-set expressions do fine!
	expectInfo=
	<(
	  "A.funcA":(
	    lab(16):(var("this"):nullTypeRoot()),
	    lab(17):(var("this"):typeSet({Object(
	            objHd(2),
	            objInst(
	              2,
	              (var("var"):typeSet({Float()})),
	              "A",
	              {}))})),
	    lab(4):(var("this"):typeSet({Object(
	            objHd(2),
	            objInst(
	              2,
	              (var("var"):typeSet({Float()})),
	              "A",
	              {}))}))
	  ),
	  "SettingAnInstanceProperty.php":(
	    lab(6):(var("a"):nullTypeRoot()),
	    lab(12):(var("a"):typeSet({Object(
	            objHd(2),
	            objInst(
	              2,
	              (var("var"):typeSet({Float()})),
	              "A",
	              {}))})),
	    lab(14):(var("a"):nullTypeRoot()),
	    lab(15):(var("a"):typeSet({Object(
	            objHd(2),
	            objInst(
	              2,
	              (var("var"):typeSet({Float()})),
	              "A",
	              {}))})),
	    lab(9):(var("a"):typeSet({Object(
	            objHd(2),
	            objInst(
	              2,
	              (var("var"):nullTypeRoot()),
	              "A",
	              {}))}))
	  )
	),(
	  "A.funcA":[],
	  "SettingAnInstanceProperty.php":[
	    usingVoidTypeForExpr("Computed typeSet for lab(12) has Void type."),
	    objChangedState("Object instance: var(a) changed state in a func. or method body @ lab(12).")
	  ]
	)>;
	
	return assertEquals(<AppExitEnvms,AppWarnings>,expectInfo,"AppInfo","generate warnings");	
}

test bool test_ReadUninitializedPropertyError2()
{
	fileTest="ReadUninitializedPropertyError2.php";
	exitEnvm=runAnalysis(localP,fileTest);
	
	//Now making sure that everything works okay using a much
	//more comprehensive example,
	
	expectInfo=
	<(
	  "DataRow.setMyContent":(
	    lab(86):(
	      var("this"):nullTypeRoot(),
	      var("str"):nullTypeRoot()
	    ),
	    lab(87):(
	      var("this"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("str"):typeSet({String()})
	    ),
	    lab(88):(
	      var("this"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):nullTypeRoot()),
	              "DataRow",
	              {}))}),
	      var("str"):typeSet({String()})
	    ),
	    lab(4):(
	      var("this"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("str"):typeSet({String()})
	    )
	  ),
	  "DataReader.setDataStream":(
	    lab(29):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))})
	    ),
	    lab(100):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))})
	    ),
	    lab(101):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))})
	    ),
	    lab(32):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))})
	    ),
	    lab(98):(
	      var("newDataStream"):nullTypeRoot(),
	      var("this"):nullTypeRoot()
	    ),
	    lab(102):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))})
	    ),
	    lab(38):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))})
	    ),
	    lab(99):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))})
	    ),
	    lab(35):(
	      var("newDataStream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))})
	    )
	  ),
	  "ReadUninitializedPropertyError2.php":(
	    lab(84):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(85):(
	      var("dataObj"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(54):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):nullTypeRoot()),
	              "DataStream",
	              {}))}),
	      var("reader"):nullTypeRoot(),
	      var("success"):nullTypeRoot()
	    ),
	    lab(80):(
	      var("dataObj"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(82):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):nullTypeRoot(),
	      var("reader"):nullTypeRoot(),
	      var("success"):nullTypeRoot()
	    ),
	    lab(62):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))}),
	      var("success"):nullTypeRoot()
	    ),
	    lab(58):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):nullTypeRoot(),
	      var("success"):nullTypeRoot()
	    ),
	    lab(27):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):nullTypeRoot(),
	      var("reader"):nullTypeRoot(),
	      var("success"):nullTypeRoot()
	    ),
	    lab(68):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(70):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(9):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):nullTypeRoot(),
	      var("reader"):nullTypeRoot(),
	      var("success"):nullTypeRoot()
	    ),
	    lab(74):(
	      var("dataObj"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(83):(
	      var("dataObj"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("stream"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))}),
	      var("reader"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))}),
	      var("success"):typeSet({Bool()})
	    ),
	    lab(51):(
	      var("dataObj"):nullTypeRoot(),
	      var("stream"):nullTypeRoot(),
	      var("reader"):nullTypeRoot(),
	      var("success"):nullTypeRoot()
	    )
	  ),
	  "DataRow.getMyContent":(
	    lab(89):(var("this"):nullTypeRoot()),
	    lab(90):(var("this"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))})),
	    lab(8):(var("this"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}))
	  ),
	  "DataStream.setMyResource":(
	    lab(20):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))})
	    ),
	    lab(16):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))})
	    ),
	    lab(92):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))})
	    ),
	    lab(93):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):nullTypeRoot()),
	              "DataStream",
	              {}))})
	    ),
	    lab(94):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))})
	    ),
	    lab(95):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):nullTypeRoot()),
	              "DataStream",
	              {}))})
	    ),
	    lab(24):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):typeSet({String()})),
	              "DataStream",
	              {}))})
	    ),
	    lab(91):(
	      var("val"):nullTypeRoot(),
	      var("this"):nullTypeRoot()
	    ),
	    lab(12):(
	      var("val"):typeSet({String()}),
	      var("this"):typeSet({Object(
	            objHd(4),
	            objInst(
	              4,
	              (var("myResource"):nullTypeRoot()),
	              "DataStream",
	              {}))})
	    )
	  ),
	  "DataReader.getRandomDataRow":(
	    lab(48):(
	      var("aData"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))})
	    ),
	    lab(103):(var("aData"):nullTypeRoot()),
	    lab(45):(
	      var("aData"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))})
	    ),
	    lab(104):(
	      var("aData"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):typeSet({String()})),
	              "DataRow",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))})
	    ),
	    lab(41):(
	      var("aData"):typeSet({Object(
	            objHd(6),
	            objInst(
	              6,
	              (var("mycontent"):nullTypeRoot()),
	              "DataRow",
	              {}))}),
	      var("this"):typeSet({Object(
	            objHd(5),
	            objInst(
	              5,
	              (var("authenticated"):nullTypeRoot()),
	              "DataReader",
	              {}))})
	    )
	  )
	),(
	  "DataRow.setMyContent":[],
	  "DataReader.setDataStream":[
	    readUninitializedClassProperty("Attempt to read un-initialized object property: var(authenticated) @ lab(29)."),
	    usingVoidTypeForExpr("Computed typeSet for lab(29) has Void type.")
	  ],
	  "ReadUninitializedPropertyError2.php":[objChangedState("Object instance: var(stream) changed state in a func. or method body @ lab(58).")],
	  "DataRow.getMyContent":[],
	  "DataStream.setMyResource":[],
	  "DataReader.getRandomDataRow":[
	    usingVoidTypeForExpr("Computed typeSet for lab(45) has Void type."),
	    objChangedState("Object instance: var(aData) changed state in a func. or method body @ lab(45).")
	  ]
	)>;	
	
	return assertEquals(<AppExitEnvms,AppWarnings>,expectInfo,"AppInfo","generate warnings");
}
